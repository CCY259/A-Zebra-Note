\section{O'Nan-Scott Theorem: The Classification of Subgroups of Symmetric Groups}
\subsection{The Socle}
\begin{definition}
	Let $G$ be a group. A normal subgroup $N$ of $G$ is said to be \textbf{minimal} if $N\neq 1$ and there is no normal subgroup $M$ of $G$ such that $1<M< N$.
\end{definition}
\begin{remark}
	In a  finite group, every nontrivial normal subgroup contains a minimal normal subgroup, but it is not necessarily true for infinite group ($\mathbb{Z}$ is a counterexample). The argument is similar to Proposition \ref{prop-maximal-grp-exist}.
\end{remark}

\begin{definition}
	Let $G$ be a group. The subgroup generated by  all minimal normal subgroups of $G$ is called the \textbf{socle} of $G$ and is denoted by $\operatorname{soc}(G)$. In the case where $G$ does not have minimal normal subgroups, we define $\soc(G)$ to be the trivial subgroup.
\end{definition}

\begin{theorem} \label{thm-minimal-normal-properties}
	Let $G$ be a nontrivial finite group.
	\begin{enumerate}[(i)]
		\item If $K$ is a minimal normal subgroup of $G$, and $L$ is any normal subgroup of $G$, then either $K \leq L$ or $\langle K, L \rangle = K \times L$.
		\item There exist minimal normal subgroups $K_1, \dots, K_m$ of $G$ such that $\text{soc}(G) = K_1 \times \dots \times K_m$.
		\item Every minimal normal subgroup $K$ of $G$ is a direct product $K = T_1 \times \dots \times T_k$ where the $T_i$ are simple normal subgroups of $K$ which are conjugate under $G$.
		\item If the subgroups $K_i$ in (ii) are all nonabelian, then $K_1, \dots, K_m$ are the only minimal normal subgroups of $G$. Similarly, if the $T_i$ in (iii) are nonabelian, then these are the only minimal normal subgroups of $K$.
	\end{enumerate}
\end{theorem}
\begin{sketch}
	Dixon Theorem 4.3A
\end{sketch}

\begin{definition}
	A group isomorphic to $\mathbb{Z}_p^n$ for some prime $p$ and integer $n\geq1$ is called an \textbf{elementary abelian} $p$-\textbf{group}.
\end{definition}

\begin{corollary} \label{cor-minimal-normal-is-elem-abelian-p}
	Every minimal normal subgroup of a finite group is either an elementary abelian $p$-group for some prime $p$, or its center is equal to $1$.
\end{corollary}
\begin{sketch}
	Dixon Corollary 4.3A
\end{sketch}

\begin{theorem} \label{thm-minimal-normal-for-finite-primitive-grp}
	If $G$ is a finite primitive subgroup of $\operatorname{Sym}(\Omega)$, and $K$ is a minimal normal subgroup of $G$, then exactly one of the following holds.
	\begin{enumerate}
		\item[(i)] for some prime $p$ and some integer $d$, $K$ is a regular elementary abelian group of order $p^d$, and $\operatorname{soc}(G) = K = C_G(K)$.
		\item[(ii)] $K$ is a regular nonabelian group, $C_G(K)$ is a minimal normal subgroup of $G$ which is permutation isomorphic to $K$, and $\operatorname{soc}(G) = K \times C_G(G)$.
		\item[(iii)] $K$ is nonabelian, $C_G(K) = 1$ and $\operatorname{soc}(G) = K$.
	\end{enumerate}
\end{theorem}
\begin{corollary} \label{cor-socle-for-finite-primitive-grp}
	If $G$ is a finite primitive group on $\Omega$, then $\operatorname{soc}(G)$ is a direct product of isomorphic simple groups. If $N$ denotes the normalizer of $\operatorname{soc}(G)$ in the symmetric group, i.e., $N:=N_{\Sym(\Omega)}(\soc(G))$, then $\operatorname{soc}(G)$ is a minimal normal subgroup of $N$. Moreover, if $\operatorname{soc}(G)$ is not regular, then it is the only minimal normal subgroup of $N$.
\end{corollary}

\subsection{Classes of Finite Primitive Groups} \label{sec-classes-of-grps}


\subsubsection{Groups of Affine Type}  
	Let $V$ be a vector space over a field $\mathbb{F}$. A bijective function $f:V\to V$ is called an \textbf{affine transformation} if there exists $a\in\GL(V)$ and $b\in V$ such that $f(x) = a(x) + b$ for all $x\in V$. 
\begin{definition}
	The subgroup of $\Sym(V)$ consisting of all affine transformations is called the \textbf{affine group} of $V$ and is denoted by $\Aff(V)$. 
\end{definition}
An important subgroup of $\Aff(V)$ is the set $\mathcal{T}(V)$ consisting of all \textbf{translations}, i.e., functions of the form $f_v(x) = x+v$ where $v\in V$. Clearly the map $v\mapsto f_v$ yields an isomorphism $V\cong \mathcal{T}(V)$. Note that $\Aff(V)$ acts on $V$ naturally. The action is transitive, since $f_v(0) = v$ for every $v\in V$. The stabilizer of $0$ in $\Aff(V)$ is $\GL(V)$. We can verify that 
\begin{equation*}
	\mathcal{T}(V) \cap \GL(V)  = \{1\},\quad  \Aff(V) = \mathcal{T}(V)\GL(V), \quad \mathcal{T}(V)\lhd \GL(V)
\end{equation*}
where the last statement follows from $	g^{-1}f_vg = f_{(g(v))}$ for all $v\in V$ and $g\in \GL(V)$. By Propositions \ref{prop-semidirect-prod-isom} and \ref{prop-internal-semidirect-prod-isom}, one can show that
\begin{equation*}
\Aff(V) \cong V\rtimes_\alpha \GL(V)
\end{equation*}
where $\alpha$ is the natural action of $\GL(V)$ on $V$. If $V$ is $n$-dimensional and $\mathbb{F}$ is of prime power $q$, then we write 
\begin{equation*}
	\Aff(n,q) \cong \mathbb{F}^n_q\rtimes_\alpha \GL(n,q).
\end{equation*}
Now $\Aff(V)$ acts on $V$ by
\begin{equation*}
	x^{(y,f)} = f(x) + y.
\end{equation*}
\begin{remark}
	Depend on the context, sometimes it is convenient to define an affine group as the external semidirect product.
\end{remark}
Now let the socle $B$ of $G$ be isomorphic to $\mathbb{Z}_p^k$ with $k\geq 1$. Recall that the affine group $\Aff(k,p) \cong \Aff(B)$ acts on $\Omega = \mathbb{Z}_k^p$.  We say that $G$ is of \textbf{type (A)} if $G$ is a subgroup of $\Aff(k,p)$.



\begin{lemma} \label{lemma-elem-p-group-is-VS-over-Zp}
	If $G$ is an elementary abelian $p$-group, then $G$ can be regarded as a vector space over $\mathbb{Z}_p$. Hence every group automorphism of $G$ is a linear transformation over $\mathbb{Z}_p$, i.e.,
	\begin{equation*}
		\Aut(G)  =\GL(G).
	\end{equation*}
\end{lemma}
\begin{sketch}
	Define the following operations by
	\begin{align*}
		x+y &:= xy \quad \text{for }x,y\in G,
		\\
		k\cdot x &:= x^k \quad \text{for }k\in \mathbb{Z}_p , x\in G.
	\end{align*}
	The rest is just routine.
\end{sketch}

\begin{lemma} \label{lemma-abel-trans-perm-is-regular}
	Let $G$ be an abelian transitive permutation group on $\Omega$. Then $G$ is regular.
\end{lemma}
\begin{sketch}
	Let $\omega\in \Omega$. Since $G$ is abelian, we can write 
	\begin{equation*}
		G_\omega = \bigcap_{g\in G} G_\omega = \bigcap_{g\in G} g^{-1}G_\omega g.
	\end{equation*}
	By Proposition \ref{prop-kernel-of-transitive-action}, the kernel of this action is $G_\omega$. Since this action is faithful (we are considering permutation group), it follows that $G_\omega = 1$.
\end{sketch}

\begin{proposition} \label{prop-type-A}
	Let $ G $ be a primitive permutation group on $ \Omega $ of degree $ n $ with an abelian normal subgroup $ N \neq 1 $. Then $ N = C_G(N) $ is the unique minimal normal subgroup of $ G $ and $ n = |N| = p^m $ for some prime number $ p $. Furthermore, $G$ is of type (A).
\end{proposition}
\begin{sketch}
	Since $G$ is primitive,  $N$ acts transitively on $\Omega$. Lemma \ref{lemma-abel-trans-perm-is-regular} shows that $N$ is regular, and thus $|N| = |\Omega|=n$ by Orbit-Stabilizer Theorem (Theorem \ref{thm-orbit-stab}). Now we show that $N$ is minimal normal subgroup of $G$. Let $H$ be a normal subgroup of $G$ such that $1<H<N$. Then we can apply the argument above on $H$ to obtain that $H$ is regular, i.e., $|H| = n$. This contradicts the fact that $H<N$. Hence $N$ is minimal. By Corollary \ref{cor-minimal-normal-is-elem-abelian-p}, $N$ is an elementary abelian $p$-group for some prime $p$ and hence $|N| = p^m$ for some $m\geq 1$.
	
	Since $N$ is abelian, we see that $N = C_{\Sym(\Omega)}(N)\geq C_G(N) =:C$ by Theorem \ref{thm-centralizer-trans-perm-grp}.(v). Hence $N=C$. We claim that $N$ is the unique minimal normal subgroup of $G$. Let $N'$ be a minimal normal subgroup of $G$. Then $[N,N']$ is a normal subgroup of $G$ contained both in $N$ and $N'$. If $[N,N'] = 1$, then $N'\subseteq C = N$ and so $N' = N$. Without loss of generality assume that $[N,N']=N$, then   we get $N\subseteq N'$ and thus $N = N'$. Therefore $N$ is unique.
	
	
	Also, we have $G = G_\omega N$ with $N \cap G_\omega = N_\omega = 1$. Hence every element can be expressed uniquely in the form $gn$ where $g\in G_\omega$ and $n\in N$. Note that $G= G_\omega N$ acts faithfully on $N$ by $$ x^{gn} = g^{-1}xgn$$ for $n, x \in N$ and $g \in G_\omega$. Define a monomorphism $\phi:G\rightarrow  \Aff(N)$ by $
	\phi(gn) = (n,\pi_g)$
	where $\pi_g$ is the conjugation on $N$ by $g$. In view of Lemma \ref{lemma-elem-p-group-is-VS-over-Zp}, $\pi_g$ is a vector space automorphism of $N$ and hence $\phi(G)\subseteq \Aff(N)$. Thus $(G,N)$ is permutationally isomorphic to a subgroup of $(\Aff(N), N)$ (and hence a subgroup of $(\Aff(m,p), \mathbb{Z}_p^m)$.
	
	We now consider the bijection $\vartheta : N \to \Omega$ defined by  $\vartheta(x) = \omega^x$. It suffices to show that $(G,N)$ is permutationally isomorphic to $(G,\Omega)$. Let $n,x\in N$ and $g\in G_\omega$. Then
	\begin{equation*}
		\vartheta(x^{gn}) = \vartheta(g^{-1}xgn) =  \omega^{g^{-1}xgn} = (\omega^g)^{g^{-1}xgn} =\vartheta(x)^{ga}.
	\end{equation*}
	This completes the proof.
\end{sketch}




\subsubsection{Almost Simple Groups} Let $T$ be a nonabelian and nonregular simple group such that $\soc(G) \cong T$. We say that a group $G$ is of \textbf{type (S)} if $T\leq G\leq \Aut(T)$. In fact $T\leq G$ is redundant, but we write it down so that it is closely related to the following definition.
\begin{definition}
	A group $G$ is said to be \textbf{almost simple} if there exists a nonabelian simple group $S$ such that $S\leq G\leq \Aut S$.
\end{definition}


\begin{proposition} \label{prop-type-S}
	Let $G$ be a finite primitive group with a nonabelian simple socle. Then $G$ is of type (S).
\end{proposition}






\subsubsection{Groups of Diagonal Type} \label{sec-diagonal-type} In this case $\soc(G)\cong T^k$, where $k\geq 2$ and $T$ is a nonabelian simple group. Define
\begin{equation*}
	W = \{(a_1,\dots, a_k)\pi\in \Aut (T)\wr_k S_k\mid a_i\equiv a_j \text{ mod } \Inn T \text{ for all }i,j\}.
\end{equation*}
\begin{proposition}
	Let $B$ be the socle of $W$. Then the following hold.
	\begin{enumerate}[(i)]
		\item $W$ is a subgroup of $\Aut (T)\wr_k S_k$.
		\item $B\cong T^k$.
		\item $W = B.(\Out(T)\times S_k)$.
	\end{enumerate}
\end{proposition}
Define
\begin{equation*}
	D = \{(a,\dots, a)\pi\in \Aut (T)\wr_k S_k\}.
\end{equation*}
Note that $D$ is a subgroup of $W$.  Now $W$ acts on the set $\Omega$ of right cosets of $D$ in $W$. For $1\leq i\leq k$, let $T_i$ be the subgroup of $B$ consisting of the $k$-tuples with $1$ in all but the $i$th component. Then $T_i\cong T$ and $B = T_1\times \cdots \times T_k$. So $W$ acts on $\mathcal{T} = \{T_1,\dots, T_k\}$. 

Let $P$ be the permutation group induced by $W$ on $\mathcal{T}$. We say that a group $G$ is of \textbf{type (D)} if $B \leq G \leq W = B.(\Out(T)\times S_k)$ and one of the following holds:
\begin{enumerate}[(i)]
	\item $P$ is primitive on $\mathcal{T}$.
	\item $k=2$ and $P=1$.
\end{enumerate}

\subsubsection{Groups of Product Type}  Let $H$ be a primitive permutation group on a set $\Gamma$ of type (S) or (D). Let $\ell>1$ and set $W = H\wr_\ell S_\ell$. Consider the product action of $W$ on $\Omega = \Gamma^\ell$. If $K$ is the socle of $H$, then $B=K^\ell$ is the socle of $W$. Note that $W$ acts naturally on the set of $\ell$ factors in $B$.  We say that a group $G$ is of \textbf{type (P)} if $B\leq G\leq W$ and $G$ acts transitively on these $\ell$ factors.


\subsubsection{Twisted Wreath Product} 
Let $A$ and $G$ be groups, and let $H$ be a subgroup of $G$ acting on $A$ with respect to an action $\varphi:H\rightarrow \Aut A$. Let 
\begin{equation*}
	B = \{b\in A^G\mid b(gh) = b(g)^h\text{ for all }g\in G,h\in H\}.
\end{equation*}
Recall that $A^G$ is a group under pointwise multiplication. If $b_1,b_2\in B$, it is easy to verify that $b_1b_2\in B$ and hence $B$ is a subgroup of $A^G$. Now we define an action $\psi$ of $G$ on $B$ by. 
\begin{equation*}
	b^x(g) = b(xg)
\end{equation*}
for $x,g\in G$ and $b\in B$. This is an action because it satisfies all the formulae stated in Proposition \ref{prop-action-criterion-for-groups}.

\begin{definition}
	The semidirect product $B\rtimes_\psi G$ with respect to the action $\psi$ defined above is called the \textbf{twisted wreath product} $A\twr_\varphi G$ of $A$ by $G$. The groups $B$ and $G$ are called the \textbf{base group} and \textbf{top group}, respectively. The subgroup $H$ is called the \textbf{twisting subgroup}.
\end{definition}
\begin{remark}
	If $H = \{1\}$, then we get the standard wreath product of $A$ by $G$ where $G$ acts on itself by left regular action.
\end{remark}

Let $T$ be a nonabelian simple group. Let $P\leq S_n$ be a primitive permutation group and let $Q$ be the point stabilizer $P_i$. Let $\varphi:Q\rightarrow \Aut T$ be an action such that $\varphi(Q)\supseteq \Inn T$. So we have the twisted wreath product $W=T\twr_\varphi P$ of $T$ by $P$. Now $W$ acts naturally on the set $\Omega$ of right cosets of $P$ in $W$.


 We say that a group $G$ is of \textbf{type (T)} if $G = T\twr_\varphi P$ and $G$ is primitive on $\Omega$. 


\subsection{Main Result}

\begin{proposition}
	Let $G$ be an intransitive permutation group on $\Omega$ of degree $n$. Then $G$ is  a subgroup of $S_k\times S_{n-k}$ for some $1\leq k\leq n/2$.
\end{proposition}
\begin{sketch}
	Since $G$ is intransitive, we have an orbit $\Delta$ of size $1\leq k\leq n/2$. Hence $G \leq \Sym(\Delta) \times \Sym(\Omega\setminus \Delta) \cong S_k \times S_{n-k}$.
\end{sketch}



\begin{proposition}
	Let $G$ be a transitive and imprimitive permutation group on $\Omega$ of degree $n$. Then $G$ is a subgroup of $S_k \wr S_m$, where $1<k,m<n$ and $n = km$.
\end{proposition}
\begin{sketch}
	Since $G$ is imprimitive, we have a nontrivial system $\Sigma =\{\Omega_1,\dots, \Omega_m\}$ of imprimitivity of $\Omega$. Set $|\Omega| = k$. So we have $1<k,m<n$. By Theorem \ref{thm-embedding}, $G$ can be embedded in $G_{\Omega_1}\wr\phi(G)$ (where $\phi$ is the induced action of $G$ on $\Sigma$), which is isomorphic to $S_k \wr_m S_m$.
\end{sketch}



\begin{theorem}[Aschbacher-O'Nan-Scott Theorem]
	 Let $H$ be a subgroup of $S_n$. Then one of the following holds.
	\begin{enumerate}[(i)]
		\item $H$ is a subgroup of $S_k \times S_{n-k}$, where $1<k<n$;
		\item $H$ is a subgroup of $S_k \wr S_m$, where $n = km$;
		\item $H$ is one of the types (A), (S), (D), (P) and (T) described in Section \ref{sec-classes-of-grps}.
	\end{enumerate}
\end{theorem}


\subsection{Kilang}
Let $G$ be a primitive permutation group on a finite set $\Omega$ of size $n$, let $\alpha \in \Omega$, and let $M = \operatorname{soc} G$, the socle of $G$.

Let $J$ be a minimal normal subgroup of $G$. Then $J$ is transitive on $\Omega$. The centralizer $C_G(J)$ is also a normal subgroup of $G$. If $C_G(J) \neq 1$ then $C_G(J)$ is transitive on $\Omega$, whence $J$ and $C_G(J)$ are both regular on $\Omega$; and $J$ and $C_G(J)$ are equal if and only if $J$ is abelian. Here $J$ and $C_G(J)$ are minimal normal subgroups of $G$ and there are no further minimal normal subgroups as such subgroups would centralize $J$. Moreover $J$ and $C_G(J)$ are isomorphic as they are right and left regular representations of the same group. If on the other hand $C_G(J)=1$ then $J$ is the unique minimal normal subgroup of $G$. Thus in either case $M = J C_G(J) = T_1 \times \dots \times T_k$ with $k \ge 1$ and $T_i \cong T$ for each $i$, where $T$ is a simple group.

If $M$ is abelian then $G$ is of type I, so assume that $M$ is nonabelian. If $k=1$ then $G$ is of type II; the fact that $M_\alpha \neq 1$ here will be shown at the end of the proof. Assume then that $k \ge 2$. In this case $G$ permutes the set $\{T_1, \dots, T_k\}$ and since $G_\alpha$ is maximal in $G$,
\begin{equation}
	M_\alpha \text{ is a maximal proper } G_\alpha \text{-invariant subgroup of } M.
\end{equation}
For $1 \le i \le k$ let $p_i$ be the projection of $M$ onto $T_i$.

\textbf{Case 1.} First suppose that $p_i(M_\alpha) = T_i$ for some $i$. Then it follows from (1) that $p_j(M_\alpha) = T_j$ for all $j=1, \dots, k$ and so $M_\alpha$ is a direct product $D_1 \times \dots \times D_l$ of full diagonal subgroups $D_i$ of subproducts $\prod_{j \in I_i} T_j$ where the $I_i$ partition $\{1, \dots, k\}$.
Choose notation so that $I_1 = \{1, \dots, m\}$ (so $m \ge 2$). By (1) $G_\alpha$ is transitive on $\{D_1, \dots, D_l\}$ and hence each $D_i$ involves precisely $m$ of the factors $T_i$, so $k=lm$. Let $P$ be the permutation group induced by $G$ on the set $\mathcal{T} = \{T_1, \dots, T_k\}$. Assume first that $l=1$. If $P$ preserved a nontrivial partition of $\mathcal{T}$ then the subgroup $Y$ of all elements of $M$ constant on each block of the partition would be $G_\alpha$-invariant with $M_\alpha < Y < M$, contradicting (1). Thus $P$ leaves invariant no nontrivial partition of $\mathcal{T}$, and so either $P$ is primitive on $\mathcal{T}$, or $P=1, k=2$ and $G$ has two minimal normal subgroups. In either case we show that $G$ is of type III(a) as follows. First we claim that up to permutation equivalence we can identify $M$ with $(\operatorname{Inn} T)^k$ so that
$$M_\alpha = D_1 = \{ ((i, \dots, i) | i \in \operatorname{Inn} T) \}. $$
For let $M = (\operatorname{Inn} T)^k$ and let $D = \{((i, \dots, i) | i \in \operatorname{Inn} T) \} \le M$. Let $E$ be another diagonal subgroup of $M$; thus
$$E = \{ (i^{\varphi_1}, \dots, i^{\varphi_{k-1}}, i) | i \in \operatorname{Inn} T \} $$
for some $\varphi_1, \dots, \varphi_{k-1} \in \Aut T$. Define $\varphi: (M:D) \to (M:E)$ (where $(M:L)$ denotes the set of right cosets of a subgroup $L$ in $M$), and $\psi \in \Aut M$ by
$$ \varphi: D(i_1, \dots, i_{k-1}, 1) \to E(i_1^{\varphi_1}, \dots, i_{k-1}^{\varphi_{k-1}}, 1), $$
$$ \psi: (i_1, \dots, i_k) \mapsto (i_1^{\varphi_1}, \dots, i_{k-1}^{\varphi_{k-1}}, i_k), $$
where $i_j \in \operatorname{Inn} T$ for $1 \le j \le k$. Then for $\omega \in (M:D)$ and $m \in M$, we have $(\omega m)\varphi = (\omega \varphi)(m \psi)$. Thus the actions of $M$ on $(M:D)$ and on $(M:E)$ are permutation equivalent, as claimed. Now the full normalizer of $M$ in $\operatorname{Sym}(\Omega)$ is $M \cdot (\operatorname{Out} T \times S_k)$, and hence $G^\Omega$ is permutation equivalent to a subgroup of $W^\Omega$, where $W$ is as described in III(a).

Now let $l>1$ and set $K=T_1 \times \dots \times T_m$ and $N=N_G(K)$. It follows from (1) that $D_1$ is a maximal $N_\alpha$-invariant subgroup of $K$. For $L \le N$ denote by $L^*$ the group of automorphisms of $K$ induced by $L$ by conjugation, so that $L^*=LC_G(K)/C_G(K)$. Since $N$ contains $M$, we see that $N$ is transitive on $\Omega$ and so $N=MN_\alpha$. Hence $N^*=K^*N_\alpha^*$. Let $Y$ be a maximal subgroup of $N$ containing $N_\alpha C_G(K)$. Then $Y \cap K$ is an $N_\alpha$-invariant subgroup of $K$ containing $D_1$, and by maximality of $D_1$ we have $Y \cap K = D_1$. Thus $Y \cap M = D_1 \times T_{m+1} \times \dots \times T_k$. Also $Y = (Y \cap M)N_\alpha$ so that $Y^* = D_1^* N_\alpha^* = N_\alpha^*$, and hence $Y=N_\alpha C_G(K)$, that is, $N_\alpha C_G(K)$ is a maximal subgroup of $N$. Set $H=N^*$ and let $\Gamma$ be the coset space $(H:N_\alpha^*)$. Then $H$ has socle $K^* \cong K$ and $H$ is a primitive permutation group on $\Gamma$ of type III(a). Also $|\Omega| = |\Gamma|^l$.

We now claim that $G^\Omega$ is permutation equivalent to a subgroup of $H \text{ wr } S_l$ in its natural product action on $\Gamma^l$, hence to a group of type III(b)(ii) (the transitivity of $G$ on the $l$ factors in $K^l$ follows from primitivity). To see this, let $\mathcal{R} = \{g_1, \dots, g_l\}$ be a right transversal for $N_\alpha$ in $G_\alpha$ and for $N$ in $G$, such that $D_1^{g_i} = D_i$ for $1 \le i \le l$. Write $K_i = K^{g_i}$ ($1 \le i \le l$), so that $G$ permutes the set $\{K_1, \dots, K_l\}$. For $g \in G$, write $g = n\overline{g}$ with $\overline{g} \in \mathcal{R}$ and $n \in N$. Writing elements of $H \text{ wr } S_l$ in the form $(h_1, \dots, h_l)\pi$ with $h_i \in H, \pi \in S_l$ and $\pi$ permuting the components $h_i$ naturally, we define a map $\rho: G \to H \text{ wr } S_l$ by
$$ \rho: g \mapsto (a_1^*, \dots, a_l^*)\pi \quad (g \in G), $$
where $\pi$ is the permutation induced by $g$ on $\{K_1, \dots, K_l\}$, for $1 \le i \le l$ we have $a_i = g_i g (\overline{g_i g})^{-1}$, and $a_i^*$ denotes the automorphism of $K$ induced by conjugation by $a_i$. Then $\rho$ is a monomorphism; moreover, since $g_i \in G_\alpha$ for all $i$, we have $G_\alpha \rho \le N_\alpha^* \text{ wr } S_l$, the point stabilizer in the natural action of $H \text{ wr } S_l$ on $\Gamma^l$. Since $|\Omega| = |\Gamma|^l$, identification of $G$ with its image $G\rho$ gives the required embedding of $G$ in $H \text{ wr } S_l$, acting naturally on $\Gamma^l$. This proves our claim.

\textbf{Case 2.} Now suppose that $R_i = p_i(M_\alpha)$ is a proper subgroup of $T_i$ for each $i=1, \dots, k$. Since each $R_i$ is an $N_G(T_i)$-invariant subgroup of $T_i$, it follows from (1) that $G_\alpha$ is transitive on $\{T_1, \dots, T_k\}$ and hence for $i=1, \dots, k$, $R_i$ is the image of $R_1$ under an isomorphism $T_1 \to T_i$. Since $R_1 \times \dots \times R_k$ is $G_\alpha$-invariant we have $M_\alpha = R_1 \times \dots \times R_k$. Also $R_1$ must be a maximal $N_G(T_1)$-invariant proper subgroup of $T_1$. Set $N = N_G(T_1)$ and for $L \le N$ denote by $L^*$ the group of automorphisms of $T_1$ induced by $L$ by conjugation, so that $L^* = LC_G(T_1)/C_G(T_1)$. Since $N$ contains the transitive subgroup $M$, we have $N=MN_\alpha$. Hence $N^*=T_1^*N_\alpha^*$.

\textbf{Case 2(a).} Suppose that $T_1^* \le N_\alpha^*$. Thus $N^*=T_1^*N_\alpha^* = N_\alpha^*$. If $R_1 \neq 1$ then
$$T_1 = (R_1^{T_1^*}) \le (R_1^{C_G(T_1)N_\alpha}) = (R_1^{N_\alpha}) \le G_\alpha $$
which is not so. Hence $R_1=1$ and so $M_\alpha=1$. Define $\varphi: N_\alpha \to \Aut T_1$ to be the natural homomorphism (that is, for $n \in N_\alpha$ and $t \in T_1, \varphi(n): t \mapsto t^n$), so that $\ker \varphi = C_G(T_1) \cap G_\alpha$ and $\operatorname{Im} \varphi = N_\alpha^*$ contains $\operatorname{Inn} T_1 = T_1^*$. Write $Z=\varphi^{-1}(\operatorname{Inn} T_1)$. Also let $Y$ be the kernel of the action of $G$ on $\{T_1, \dots, T_k\}$. We show first that $Y=M$. Now $Y_\alpha \cong Y_\alpha M/M$ is isomorphic to a subgroup of $(\operatorname{Out} T_1)^k$ and hence is soluble by the Schreier ``Conjecture''. Also $Z/C \cong T_1$ is simple, where we write $C = \ker \varphi$. Since $Y_\alpha C$ and $Z$ are both normal subgroups of $N_\alpha$ we therefore have $[Z/C, Y_\alpha C/C] = 1$ in $N_\alpha/C$. Thus $Y_\alpha \le C$, that is, $Y_\alpha$ centralizes $T_1$. Similarly $Y_\alpha$ centralizes $T_i$ for all $i$ and hence $Y_\alpha=1$. Thus $Y=M$.
Set $P=G_\alpha$ and $Q=N_\alpha$ so that $P$ acts faithfully and transitively on $\{T_1, \dots, T_k\}$ and $G=MP$. Abusing notation slightly, take $P$ to act on $I=\{1, \dots, k\}$ by $T_i^p = T_{ip}$ ($i \in I, p \in P$). We show finally that there is an isomorphism of $G$ onto the twisted wreath product $T_1 \text{ twr}_\varphi P^I$ (defined in Section 1) which maps $M$ onto the base group $B$ and $G_\alpha=P$ onto the top group $P^I$, so that $G$ is of type III(c). For $1 \le i \le k$ choose $c_i \in P$ such that $T_i^{c_i} = T_1$ (so that $\{c_1, \dots, c_k\}$ is a transversal for $Q$ in $P$). Now each $m \in M$ is of the form $m = \prod_{i=1}^k a_i$ with $a_i \in T_i$ and hence $a_i^{c_i} \in T_1$ for $1 \le i \le k$. We define a map $\vartheta$ from $G$ into $T_1 \text{ twr}_\varphi P$ by
$$ \vartheta: mu \mapsto \vartheta_m u $$
for $m = \prod a_i \in M$ and $u \in P$, where $\vartheta_m: P \to T_1$ is the map given by $\vartheta_m(c_i q) = a_i^{c_i q}$ for $1 \le i \le k$ and $q \in Q$. Clearly $\vartheta_m$ belongs to the base group $B$ of $T_1 \text{ twr}_\varphi P^I$, and $\vartheta$ is 1-1 and hence bijective. To see that $\vartheta$ is a homomorphism we need to show that
$$ \vartheta_m^u = (\vartheta_m)^u \quad \text{for } m=\prod a_i \in M, u \in P. $$
Write $b = \vartheta_m$. By the definition of $b^u$ in Section 1, $b^u(c_i q) = b(uc_i q)$, which equals $b(c_{iu^{-1}} y_i q)$ where $y_i = c_{iu^{-1}}^{-1} uc_i \in Q$. Since $b \in B$, this equals $b(c_{iu^{-1}} q)^{y_i}$, and therefore
$$ b^u(c_i q) = a_{iu^{-1}}^{c_{iu^{-1}} q y_i}. $$
But this is clearly the same as $\vartheta_m^u(c_i q)$, and hence $\vartheta_m^u = (\vartheta_m)^u$, as required.
Thus $\vartheta$ is an isomorphism, and since $\vartheta(M) = B$ and $\vartheta(G_\alpha) = P$ it follows that $G$ is of type III(c).


\textbf{Case 2(b).} Thus we may assume that $T_1^* \not\le N_\alpha^*$. If $Y$ is a maximal subgroup of $N$ containing $N_\alpha C_G(T_1)$ then $Y \cap T_1$ is an $N_\alpha$-invariant subgroup of $T_1$ containing $R_1$. By the maximality of $R_1$ and since $Y \ne N$ we have $Y \cap T_1 = R_1$. Thus $Y \cap M = R_1 \times T_2 \times \dots \times T_k$. Also $Y = (Y \cap M)N_\alpha$ so that $Y^* = R_1^* N_\alpha^* = N_\alpha^*$, and hence $Y = N_\alpha C_G(T_1)$, that is, $N_\alpha C_G(T_1)$ is a maximal subgroup of $N$. Let $H=N^*$ and let $\Gamma$ be the coset space $(H:N_\alpha^*)$. Then $H$ has socle $T_1^* \cong T_1$ and $H$ is primitive on $\Gamma$. Also $|\Gamma| = |T_1:R_1|$ and so $|\Omega|=|\Gamma|^k$. A calculation along the lines of the case $l>1$ of Case 1 shows that $G^\Omega$ is permutation equivalent to a subgroup of $H \text{ wr } S_k$ in its product action on $\Gamma^k$. Then $G$ is of type III(b)(i); for this it remains to show that $M_\alpha \ne 1$. This will follow from the corresponding assertion in the simple socle case II.

Thus suppose that $T < G \le \Aut T$ and $T_\alpha = 1$. Then $G_\alpha$ is soluble by the Schreier ``Conjecture''. Let $Q$ be a minimal normal subgroup of $G_\alpha$. Then $Q$ is an elementary abelian $q$-group for some prime $q$. Now $C_T(Q)=1$, since both $T$ and $C_G(Q)$ are normalized by $G_\alpha$, and $G_\alpha$ is maximal in $G$. It follows that $q$ does not divide $|T|$. Hence $Q$ normalizes a Sylow 2-subgroup $S$ of $T$. We assert that $S$ is the unique such Sylow 2-subgroup. For suppose that $Q$ normalizes $S_1$, where $S_1^x=S$ and $x \in T$. Then $Q$ and $Q^x$ are Sylow $q$-subgroups of $N_{TQ}(S)$, so
$$Q=Q^{xy} \text{ for some } y \in N_T(S). \text{ We have } [Q,xy] \le Q \cap T = 1, \text{ so } xy \in C_T(Q)=1. $$
Hence $x \in N_T(S)$ and so $S_1=S$, as asserted. Thus $G_\alpha = N_G(Q) \le N_G(S)$ and so $G_\alpha < G_\alpha S < G$, contradicting the maximality of $G_\alpha$.
This completes the proof of the theorem.

\clearpage
\subsection{Tempat Untuk Edit}
Let $G$ be a primitive permutation group on a finite set $\Omega$ of size $n$, let $\alpha \in \Omega$, and let $M = \operatorname{soc} G$, the socle of $G$. By Corollary \ref{cor-socle-for-finite-primitive-grp}, we have  
\begin{equation*}
	M =  T_1 \times \dots \times T_k
\end{equation*} where $T$ is a simple group, $k \ge 1$ and $T_i \cong T$ for each $i$. 

If $M$ is abelian, then $G$ is of type (A) by Proposition \ref{prop-type-A}. So assume that $M$ is nonabelian. If $k=1$ then $G$ is of type (S) by Proposition \ref{prop-type-S}. Assume then that $k \ge 2$. In view of Theorem \ref{thm-minimal-normal-properties}.(iii), $G$ acts on the set $\{T_1, \dots, T_k\}$ by conjugation.

For $1 \le i \le k$, let $\pi_i:M\to T_i$ be the projection of $M$ onto $T_i$.

\textbf{Case 1.} First suppose that $\pi_i(M_\alpha) = T_i$ for some $i$. Then it follows from \textbf{A LEMMA} that $\pi_j(M_\alpha) = T_j$ for all $j=1, \dots, k$. By \textbf{LEMMA 2}, there is a partition $\{I_1,\dots, I_l\}$ for which 
\begin{equation*}
	M_\alpha=D_1 \times \dots \times D_l
\end{equation*} where each $D_i$ is a subgroup of $\prod_{j \in I_i} T_j$.


Choose notation so that $I_1 = \{1, \dots, m\}$ (so $m \ge 2$ \textbf{WHYYYY}). By \textbf{LEMMA 3}, $G_\alpha$ is transitive on $\{D_1, \dots, D_l\}$ and hence each $D_i$ involves precisely $m$ of the factors $T_i$, so $k=lm$. Let $P$ be the permutation group induced by $G$ on the set $\mathcal{T} = \{T_1, \dots, T_k\}$. 

Assume first that $l=1$. By \textbf{LEMMA 4}, we have the following two cases:
\begin{itemize}
	\item $P$ is primitive on $\mathcal{T}$;
	\item $P=1, k=2$ and $G$ has two minimal normal subgroups.
\end{itemize} In either case we show that $G$ is of type (D) as follows. Using \textbf{LEMMA 5} we can identify $M$ with $(\operatorname{Inn} T)^k$ so that
$$M_\alpha = D_1 = \{ ((i, \dots, i) | i \in \operatorname{Inn} T) \}. $$ Now the full normalizer of $M$ in $\Sym(\Omega)$ is $M.(\Out (T) \times S_k)$, and hence $(G,\Omega)$ is permutation isomorphic to a subgroup of $(W,\Omega)$, where $W$ is as described in Section \ref{sec-diagonal-type}.

Now let $l>1$ and set $K=T_1 \times \dots \times T_m$ and $N=N_G(K)$. It follows from (1) that $D_1$ is a maximal $N_\alpha$-invariant subgroup of $K$. For $L \le N$ denote by $L^*$ the group of automorphisms of $K$ induced by $L$ by conjugation, so that $L^*=LC_G(K)/C_G(K)$. Since $N$ contains $M$, we see that $N$ is transitive on $\Omega$ and so $N=MN_\alpha$. Hence $N^*=K^*N_\alpha^*$. Let $Y$ be a maximal subgroup of $N$ containing $N_\alpha C_G(K)$. Then $Y \cap K$ is an $N_\alpha$-invariant subgroup of $K$ containing $D_1$, and by maximality of $D_1$ we have $Y \cap K = D_1$. Thus $Y \cap M = D_1 \times T_{m+1} \times \dots \times T_k$. Also $Y = (Y \cap M)N_\alpha$ so that $Y^* = D_1^* N_\alpha^* = N_\alpha^*$, and hence $Y=N_\alpha C_G(K)$, that is, $N_\alpha C_G(K)$ is a maximal subgroup of $N$. Set $H=N^*$ and let $\Gamma$ be the coset space $(H:N_\alpha^*)$. Then $H$ has socle $K^* \cong K$ and $H$ is a primitive permutation group on $\Gamma$ of type III(a). Also $|\Omega| = |\Gamma|^l$.

We now claim that $G^\Omega$ is permutation equivalent to a subgroup of $H \text{ wr } S_l$ in its natural product action on $\Gamma^l$, hence to a group of type III(b)(ii) (the transitivity of $G$ on the $l$ factors in $K^l$ follows from primitivity). To see this, let $\mathcal{R} = \{g_1, \dots, g_l\}$ be a right transversal for $N_\alpha$ in $G_\alpha$ and for $N$ in $G$, such that $D_1^{g_i} = D_i$ for $1 \le i \le l$. Write $K_i = K^{g_i}$ ($1 \le i \le l$), so that $G$ permutes the set $\{K_1, \dots, K_l\}$. For $g \in G$, write $g = n\overline{g}$ with $\overline{g} \in \mathcal{R}$ and $n \in N$. Writing elements of $H \text{ wr } S_l$ in the form $(h_1, \dots, h_l)\pi$ with $h_i \in H, \pi \in S_l$ and $\pi$ permuting the components $h_i$ naturally, we define a map $\rho: G \to H \text{ wr } S_l$ by
$$ \rho: g \mapsto (a_1^*, \dots, a_l^*)\pi \quad (g \in G), $$
where $\pi$ is the permutation induced by $g$ on $\{K_1, \dots, K_l\}$, for $1 \le i \le l$ we have $a_i = g_i g (\overline{g_i g})^{-1}$, and $a_i^*$ denotes the automorphism of $K$ induced by conjugation by $a_i$. Then $\rho$ is a monomorphism; moreover, since $g_i \in G_\alpha$ for all $i$, we have $G_\alpha \rho \le N_\alpha^* \text{ wr } S_l$, the point stabilizer in the natural action of $H \text{ wr } S_l$ on $\Gamma^l$. Since $|\Omega| = |\Gamma|^l$, identification of $G$ with its image $G\rho$ gives the required embedding of $G$ in $H \text{ wr } S_l$, acting naturally on $\Gamma^l$. This proves our claim.

\textbf{Case 2.} Now suppose that $R_i = \pi_i(M_\alpha)$ is a proper subgroup of $T_i$ for each $i=1, \dots, k$. Since each $R_i$ is an $N_G(T_i)$-invariant subgroup of $T_i$, it follows from (1) that $G_\alpha$ is transitive on $\{T_1, \dots, T_k\}$ and hence for $i=1, \dots, k$, $R_i$ is the image of $R_1$ under an isomorphism $T_1 \to T_i$. Since $R_1 \times \dots \times R_k$ is $G_\alpha$-invariant we have $M_\alpha = R_1 \times \dots \times R_k$. Also $R_1$ must be a maximal $N_G(T_1)$-invariant proper subgroup of $T_1$. Set $N = N_G(T_1)$ and for $L \le N$ denote by $L^*$ the group of automorphisms of $T_1$ induced by $L$ by conjugation, so that $L^* = LC_G(T_1)/C_G(T_1)$. Since $N$ contains the transitive subgroup $M$, we have $N=MN_\alpha$. Hence $N^*=T_1^*N_\alpha^*$.

\textbf{Case 2(a).} Suppose that $T_1^* \le N_\alpha^*$. Thus $N^*=T_1^*N_\alpha^* = N_\alpha^*$. If $R_1 \neq 1$ then
$$T_1 = (R_1^{T_1^*}) \le (R_1^{C_G(T_1)N_\alpha}) = (R_1^{N_\alpha}) \le G_\alpha $$
which is not so. Hence $R_1=1$ and so $M_\alpha=1$. Define $\varphi: N_\alpha \to \Aut T_1$ to be the natural homomorphism (that is, for $n \in N_\alpha$ and $t \in T_1, \varphi(n): t \mapsto t^n$), so that $\ker \varphi = C_G(T_1) \cap G_\alpha$ and $\operatorname{Im} \varphi = N_\alpha^*$ contains $\operatorname{Inn} T_1 = T_1^*$. Write $Z=\varphi^{-1}(\operatorname{Inn} T_1)$. Also let $Y$ be the kernel of the action of $G$ on $\{T_1, \dots, T_k\}$. We show first that $Y=M$. Now $Y_\alpha \cong Y_\alpha M/M$ is isomorphic to a subgroup of $(\operatorname{Out} T_1)^k$ and hence is soluble by the Schreier ``Conjecture''. Also $Z/C \cong T_1$ is simple, where we write $C = \ker \varphi$. Since $Y_\alpha C$ and $Z$ are both normal subgroups of $N_\alpha$ we therefore have $[Z/C, Y_\alpha C/C] = 1$ in $N_\alpha/C$. Thus $Y_\alpha \le C$, that is, $Y_\alpha$ centralizes $T_1$. Similarly $Y_\alpha$ centralizes $T_i$ for all $i$ and hence $Y_\alpha=1$. Thus $Y=M$.
Set $P=G_\alpha$ and $Q=N_\alpha$ so that $P$ acts faithfully and transitively on $\{T_1, \dots, T_k\}$ and $G=MP$. Abusing notation slightly, take $P$ to act on $I=\{1, \dots, k\}$ by $T_i^p = T_{ip}$ ($i \in I, p \in P$). We show finally that there is an isomorphism of $G$ onto the twisted wreath product $T_1 \text{ twr}_\varphi P^I$ (defined in Section 1) which maps $M$ onto the base group $B$ and $G_\alpha=P$ onto the top group $P^I$, so that $G$ is of type III(c). For $1 \le i \le k$ choose $c_i \in P$ such that $T_i^{c_i} = T_1$ (so that $\{c_1, \dots, c_k\}$ is a transversal for $Q$ in $P$). Now each $m \in M$ is of the form $m = \prod_{i=1}^k a_i$ with $a_i \in T_i$ and hence $a_i^{c_i} \in T_1$ for $1 \le i \le k$. We define a map $\vartheta$ from $G$ into $T_1 \text{ twr}_\varphi P$ by
$$ \vartheta: mu \mapsto \vartheta_m u $$
for $m = \prod a_i \in M$ and $u \in P$, where $\vartheta_m: P \to T_1$ is the map given by $\vartheta_m(c_i q) = a_i^{c_i q}$ for $1 \le i \le k$ and $q \in Q$. Clearly $\vartheta_m$ belongs to the base group $B$ of $T_1 \text{ twr}_\varphi P^I$, and $\vartheta$ is 1-1 and hence bijective. To see that $\vartheta$ is a homomorphism we need to show that
$$ \vartheta_m^u = (\vartheta_m)^u \quad \text{for } m=\prod a_i \in M, u \in P. $$
Write $b = \vartheta_m$. By the definition of $b^u$ in Section 1, $b^u(c_i q) = b(uc_i q)$, which equals $b(c_{iu^{-1}} y_i q)$ where $y_i = c_{iu^{-1}}^{-1} uc_i \in Q$. Since $b \in B$, this equals $b(c_{iu^{-1}} q)^{y_i}$, and therefore
$$ b^u(c_i q) = a_{iu^{-1}}^{c_{iu^{-1}} q y_i}. $$
But this is clearly the same as $\vartheta_m^u(c_i q)$, and hence $\vartheta_m^u = (\vartheta_m)^u$, as required.
Thus $\vartheta$ is an isomorphism, and since $\vartheta(M) = B$ and $\vartheta(G_\alpha) = P$ it follows that $G$ is of type III(c).


\textbf{Case 2(b).} Thus we may assume that $T_1^* \not\le N_\alpha^*$. If $Y$ is a maximal subgroup of $N$ containing $N_\alpha C_G(T_1)$ then $Y \cap T_1$ is an $N_\alpha$-invariant subgroup of $T_1$ containing $R_1$. By the maximality of $R_1$ and since $Y \ne N$ we have $Y \cap T_1 = R_1$. Thus $Y \cap M = R_1 \times T_2 \times \dots \times T_k$. Also $Y = (Y \cap M)N_\alpha$ so that $Y^* = R_1^* N_\alpha^* = N_\alpha^*$, and hence $Y = N_\alpha C_G(T_1)$, that is, $N_\alpha C_G(T_1)$ is a maximal subgroup of $N$. Let $H=N^*$ and let $\Gamma$ be the coset space $(H:N_\alpha^*)$. Then $H$ has socle $T_1^* \cong T_1$ and $H$ is primitive on $\Gamma$. Also $|\Gamma| = |T_1:R_1|$ and so $|\Omega|=|\Gamma|^k$. A calculation along the lines of the case $l>1$ of Case 1 shows that $G^\Omega$ is permutation equivalent to a subgroup of $H \text{ wr } S_k$ in its product action on $\Gamma^k$. Then $G$ is of type III(b)(i); for this it remains to show that $M_\alpha \ne 1$. This will follow from the corresponding assertion in the simple socle case II.

Thus suppose that $T < G \le \Aut T$ and $T_\alpha = 1$. Then $G_\alpha$ is soluble by the Schreier ``Conjecture''. Let $Q$ be a minimal normal subgroup of $G_\alpha$. Then $Q$ is an elementary abelian $q$-group for some prime $q$. Now $C_T(Q)=1$, since both $T$ and $C_G(Q)$ are normalized by $G_\alpha$, and $G_\alpha$ is maximal in $G$. It follows that $q$ does not divide $|T|$. Hence $Q$ normalizes a Sylow 2-subgroup $S$ of $T$. We assert that $S$ is the unique such Sylow 2-subgroup. For suppose that $Q$ normalizes $S_1$, where $S_1^x=S$ and $x \in T$. Then $Q$ and $Q^x$ are Sylow $q$-subgroups of $N_{TQ}(S)$, so
$$Q=Q^{xy} \text{ for some } y \in N_T(S). \text{ We have } [Q,xy] \le Q \cap T = 1, \text{ so } xy \in C_T(Q)=1. $$
Hence $x \in N_T(S)$ and so $S_1=S$, as asserted. Thus $G_\alpha = N_G(Q) \le N_G(S)$ and so $G_\alpha < G_\alpha S < G$, contradicting the maximality of $G_\alpha$.
This completes the proof of the theorem.

\paragraph{Main References.} \cite{Wilson2009,Cameron1999,Smith2018,Liebeck1988,Aschbacher1985}